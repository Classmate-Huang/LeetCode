# LeetCode204：计数质数

## 题目

统计所有小于非负整数 *`n`* 的质数的数量。

 

**示例 1：**

```
输入：n = 10
输出：4
解释：小于 10 的质数一共有 4 个, 它们是 2, 3, 5, 7 。
```

**示例 2：**

```
输入：n = 0
输出：0
```

**示例 3：**

```
输入：n = 1
输出：0
```

 

**提示：**

- `0 <= n <= 5 * 106`



## 解法一：埃氏筛选法

对于一个数x，可以从2开始枚举到$\sqrt{x}$判断其是否为质数。对每个数依次遍历，判断其是否为质数，这样的搜索时间复杂度为O($n\sqrt{n}$)。但题目中n的规模达到$10^5$及以上，时间复杂度最高只能是 O($n\log{n}$)的，所以这题暴力方法肯定会超时。

而埃氏筛选法算法建立在一个结论上：如果`x`是质数，那么`2x,3x,...`一定不为质数。因此我们可以维护一个大小为n的数组，每次找到一个质数时，就顺便把以它为因子的合数给剔除。并且为了进一步减少冗余，每次合数都从`i*i`开始找起，因为在`i*i`之前以`i`为因子的合数另一个因子必然小于`i`，即在之前就已经筛选过了。

见代码：

```c++
class Solution {
public:
    int countPrimes(int n) {
        vector<int> f(n, 1);
        int ans = 0;
        
        for(int i=2; i<n; i++){
            if(f[i]==1){
                ans += 1;
                if(i<=sqrt(n)){ // 避免i*i溢出
                    for(int j=i*i; j<n; j=j+i)  f[j] = 0; // 从i*i找起
                }
            }
        }
        
        return ans;
    }
};
```

时间复杂度：O($n\log\log{n}$)，不证明。

空间复杂度：O(n)

